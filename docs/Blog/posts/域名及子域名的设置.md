# 域名及子域名的设置
**发布日期：2025-02-24**

域名是网站最重要的组成部分之一。在自建网站时，如果仅用于测试或临时访问，直接使用 IP 地址确实是一个不错的选择。然而，在公网环境下，IP 访问存在明显的缺点：

1. **难以记忆** —— 数字 IP 地址不如域名直观易记。
2. **缺乏 HTTPS 支持** —— 许多浏览器要求网站使用 HTTPS 进行加密访问，而直接使用 IP 地址无法获得 TLS 证书。
3. **安全性问题** —— 明文传输的数据容易被中间人攻击，服务器 IP 地址也容易暴露。

为了提升安全性，我通常在购买域名后，将其托管至 Cloudflare。Cloudflare 提供多种优势，例如：

- **流量代理** —— 通过启用 Cloudflare 的小云朵代理，隐藏真实 IP 地址，防止攻击。
- **TLS 证书签发** —— Cloudflare 可签发并管理 HTTPS 证书，实现全站加密。
- **免费的DDoS 保护** —— 提供一定程度的防御，减少网站遭受恶意攻击的风险。

## 子域名的作用

子域名是在主域名的基础上添加前缀，形成新的地址。例如 `sub.example.com` 是 `example.com` 的子域名。

对我来说，使用子域名有以下几个优势：

- **节省成本** —— 购买域名需要花费一定的费用，而设置子域名是免费的。对于不太重要的网站，可以在购买一个主域名后，设置子域名来节约开支。
- **独立管理** —— 子域名可以指向不同的服务器，换句话说，就是可以指向不同的ip地址。

## 购买域名

域名可以在多个平台购买，如腾讯云、阿里云、Cloudflare 等。我个人喜欢在腾讯云购买域名，因为部分域名在腾讯云上的价格非常低。例如：

- `.top` 或 `.asia` 等顶级域名，首年价格通常在 **10 元左右**，几乎可以忽略不计。
- 我曾购买过 **5 元/年** 的 `.asia` 域名，性价比极高。

## Cloudflare 托管与解析

使用 Cloudflare 托管域名并不复杂，整个流程基本是“傻瓜式”一条龙服务。步骤如下：

1. **在域名提供商（如腾讯云）修改 DNS 服务器**，将其指向 Cloudflare 提供的地址。
2. **在 Cloudflare 控制面板添加域名**，Cloudflare 会自动导入现有解析记录。
3. **配置解析记录**，通常有以下两种方式：
   - **IPv4 地址（A 记录）**：
     - `名称`：填写子域名（如 `blog`）或 `@`（代表主域名）。
     - `值`：填写服务器的 IPv4 地址。
   - **IPv6 地址（AAAA 记录）**（若服务器支持 IPv6）。
4. **启用代理（小云朵）** 以隐藏服务器真实 IP，并开启 HTTPS 保护。

## Cloudflare 支持的端口

有一点要注意的是，Cloudflare 代理模式下，仅支持特定的 HTTP 和 HTTPS 端口：

- **HTTP 端口**（80，8080，8880，2052，2082，2086，2095）
- **HTTPS 端口**（443，2053，2083，2087，2096，8443）



